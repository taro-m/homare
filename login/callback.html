---
---
<!DOCTYPE html>
<title>Login callback</title>

<h1>Login callback</h1>

<h2>Callback parameters</h2>
<dl id="params">
</dl>

<hr />

<nav>
  <ul>
    <li><a href="{{site.api_root}}">Go to dashboard</a>
    <li><a href="./">Back to login form</a>
  </ul>
</nav>

<script>

function getParams() {
  var retval = {};
  var parts = location.search.slice(1).split('&');
  parts.forEach(function(value) {
    var v = value.split('=');
    if (v.length == 2) {
      retval[v[0]] = decodeURIComponent(v[1]);
    }
  });
  return retval;
}

function putParamsToDl(params, dl) {
  var v;
  for (var k in params) {
    var dt = document.createElement('dt');
    dt.innerText = k;
    dl.appendChild(dt);
    var dd = document.createElement('dd');
    if ((v = params[k]) == (void 0) || v.length == 0) {
      dd.innerText = '(empty string)'
    } else {
      dd.innerText = params[k];
    }
    dl.appendChild(dd);
  }
}

window.onload = function() {
  var params = getParams();
  putParamsToDl(params, document.getElementById('params'));
}

</script>
